function y = doFilter2123(x)
%DOFILTER Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 9.7 and DSP System Toolbox 9.9.
% Generated on: 09-Jan-2022 00:10:24

%#codegen

% To generate C/C++ code from this function use the codegen command.
% Type 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    %
    % Fstop1 = 21200;  % First Stopband Frequency
    % Fpass1 = 21300;  % First Passband Frequency
    % Fpass2 = 22700;  % Second Passband Frequency
    % Fstop2 = 22800;  % Second Stopband Frequency
    % Astop1 = 60;     % First Stopband Attenuation (dB)
    % Apass  = 1;      % Passband Ripple (dB)
    % Astop2 = 80;     % Second Stopband Attenuation (dB)
    % Fs     = 48000;  % Sampling Frequency
    %
    % h = fdesign.bandpass('fst1,fp1,fp2,fst2,ast1,ap,ast2', Fstop1, Fpass1, ...
    %                      Fpass2, Fstop2, Astop1, Apass, Astop2, Fs);
    %
    % Hd = design(h, 'cheby1', ...
    %     'MatchExactly', 'passband', ...
    %     'SystemObject', true);
    
    Hd = dsp.BiquadFilter( ...
        'Structure', 'Direct form II', ...
        'SOSMatrix', [1 0 -1 1 1.87552076401354 0.999047621937327; 1 0 -1 1 ...
        1.97064506719064 0.999533785056093; 1 0 -1 1 1.87520012168 ...
        0.997171903539658; 1 0 -1 1 1.9693744938308 0.998598698105499; 1 0 -1 1 ...
        1.87632764466364 0.995377812093999; 1 0 -1 1 1.96773827967311 ...
        0.997655058628188; 1 0 -1 1 1.87882326972237 0.993714508211542; 1 0 -1 1 ...
        1.96571518446205 0.996698279752685; 1 0 -1 1 1.88255330788519 ...
        0.992227096716303; 1 0 -1 1 1.96327849664065 0.995726392971104; 1 0 -1 1 ...
        1.88734087042487 0.99095492520186; 1 0 -1 1 1.96039807517397 ...
        0.99474123930093; 1 0 -1 1 1.89297850827811 0.989929736684461; 1 0 -1 1 ...
        1.95704309974534 0.993749713923431; 1 0 -1 1 1.89924202915114 ...
        0.98917380119821; 1 0 -1 1 1.95318569123484 0.992764931900425; 1 0 -1 1 ...
        1.90590436334227 0.988698269530945; 1 0 -1 1 1.94880546918298 ...
        0.991807085184497; 1 0 -1 1 1.91274835865552 0.988502091315496; 1 0 -1 1 ...
        1.94389495039477 0.990903685648195; 1 0 -1 1 1.91957751874002 ...
        0.988571868896105; 1 0 -1 1 1.93846547751408 0.990088883467697; 1 0 -1 1 ...
        1.92622395237208 0.988882927912658; 1 0 -1 1 1.9325531382518 ...
        0.989401660050161], ...
        'ScaleValues', [0.0914359112691799; 0.0914359112691799; ...
        0.0898265747101055; 0.0898265747101055; 0.0867018245143716; ...
        0.0867018245143716; 0.0821150264009985; 0.0821150264009985; ...
        0.0761434824197082; 0.0761434824197082; 0.0688879654310783; ...
        0.0688879654310783; 0.0604723016620361; 0.0604723016620361; ...
        0.0510434248790597; 0.0510434248790597; 0.0407734820305891; ...
        0.0407734820305891; 0.0298707176120433; 0.0298707176120433; ...
        0.0186393906247507; 0.0186393906247507; 0.00808235578586997; ...
        0.00808235578586997; 0.891250938133746]);
end

s = double(x);
y = step(Hd,s);

