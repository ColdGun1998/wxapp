const _0x155b20=_0x1e40;(function(_0x810a79,_0x3922aa){const _0x465e82=_0x1e40,_0x1f9fb8=_0x810a79();while(!![]){try{const _0xa91341=-parseInt(_0x465e82(0xe7))/0x1*(-parseInt(_0x465e82(0x111))/0x2)+-parseInt(_0x465e82(0x12c))/0x3*(parseInt(_0x465e82(0xf1))/0x4)+parseInt(_0x465e82(0xfe))/0x5+-parseInt(_0x465e82(0x11b))/0x6*(-parseInt(_0x465e82(0x129))/0x7)+-parseInt(_0x465e82(0xe9))/0x8+parseInt(_0x465e82(0xd5))/0x9*(parseInt(_0x465e82(0x103))/0xa)+parseInt(_0x465e82(0x121))/0xb*(-parseInt(_0x465e82(0xf5))/0xc);if(_0xa91341===_0x3922aa)break;else _0x1f9fb8['push'](_0x1f9fb8['shift']());}catch(_0x332f5f){_0x1f9fb8['push'](_0x1f9fb8['shift']());}}}(_0x8625,0x92a7e));import _0x2eafac from'./fftUtil';if(console[_0x155b20(0xd4)]){var old=console['log'];let that=this;console[_0x155b20(0xd4)]=function(){const _0x35cccf=_0x155b20;worker[_0x35cccf(0x104)]({'code':'console','content':JSON['stringify'](arguments)}),old[_0x35cccf(0xd2)](this,arguments);};}console['log']('worker\x20init');const beaconCluster1=new _0x2eafac('beaconCluster1'),beaconCluster2=new _0x2eafac('beaconCluster2');let settings1=null,settings2=null;const beaconCluster1D=new _0x2eafac(_0x155b20(0x10c));let settings1D=null;const beaconCluster2D=new _0x2eafac(_0x155b20(0x12e));let settings2D=null,frqDetect1=new _0x2eafac(_0x155b20(0x10e)),frqDetect2=new _0x2eafac(_0x155b20(0x115)),frqDetect3=new _0x2eafac(_0x155b20(0xdc)),frqDetectList=[frqDetect1,frqDetect2,frqDetect3],durationTime=0.03,sampleFrq=0xbb80,vMaxTh=0.8,vRatioTh=0.3,maxRatioTh=0x19,SingleDetectList=[],frequenceSetting1={'vMaxTh':vMaxTh,'vRatioTh':vRatioTh,'pMaxTh':Math[_0x155b20(0xe3)](durationTime*sampleFrq)-0x1,'maxRatioTh':maxRatioTh,'frequencyStart':0x4268,'frequencyEnd':0x4a38,'durationTime':durationTime,'timeInterval':0.15},frequenceSetting2={'vMaxTh':vMaxTh,'vRatioTh':vRatioTh,'pMaxTh':Math[_0x155b20(0xe3)](durationTime*sampleFrq)-0x1,'maxRatioTh':maxRatioTh,'frequencyStart':0x4a38,'frequencyEnd':0x5208,'durationTime':durationTime,'timeInterval':0.15},frequenceSetting3={'vMaxTh':vMaxTh,'vRatioTh':vRatioTh,'pMaxTh':0x7ff,'maxRatioTh':Math['floor'](durationTime*sampleFrq)-0x1,'frequencyStart':0x5208,'frequencyEnd':0x59d8,'durationTime':durationTime,'timeInterval':0.15},frequenceSettingList=[frequenceSetting1,frequenceSetting2,frequenceSetting3];frqDetectList[_0x155b20(0xe5)]((_0x23bd61,_0x119bde)=>{const _0x11ec3a=_0x155b20;_0x23bd61[_0x11ec3a(0x105)](frequenceSettingList[_0x119bde]);});let frqDetect1_suzhou=new _0x2eafac(_0x155b20(0xe6)),frqDetect2_suzhou=new _0x2eafac(_0x155b20(0x12b)),frqDetect3_suzhou=new _0x2eafac(_0x155b20(0xf4)),frqDetectList_suzhou=[frqDetect1_suzhou,frqDetect2_suzhou,frqDetect3_suzhou],frequenceSetting1_suzhou={'vMaxTh':vMaxTh,'vRatioTh':vRatioTh,'pMaxTh':Math['floor'](durationTime*sampleFrq)-0x1,'maxRatioTh':maxRatioTh,'frequencyStart':0x4268,'frequencyEnd':0x4a38,'durationTime':durationTime,'timeInterval':0.15},frequenceSetting2_suzhou={'vMaxTh':vMaxTh,'vRatioTh':vRatioTh,'pMaxTh':Math[_0x155b20(0xe3)](durationTime*sampleFrq)-0x1,'maxRatioTh':maxRatioTh,'frequencyStart':0x4a38,'frequencyEnd':0x5208,'durationTime':durationTime,'timeInterval':0.15},frequenceSetting3_suzhou={'vMaxTh':vMaxTh,'vRatioTh':vRatioTh,'pMaxTh':Math[_0x155b20(0xe3)](durationTime*sampleFrq)-0x1,'maxRatioTh':maxRatioTh,'frequencyStart':0x5208,'frequencyEnd':0x59d8,'durationTime':durationTime,'timeInterval':0.15,'totalLength':0x14},frequenceSettingList_suzhou=[frequenceSetting1_suzhou,frequenceSetting2_suzhou,frequenceSetting3_suzhou];frqDetectList_suzhou[_0x155b20(0xe5)]((_0x390de5,_0x50bc40)=>{const _0x45ad01=_0x155b20;_0x390de5[_0x45ad01(0x105)](frequenceSettingList_suzhou[_0x50bc40]);});function _0x8625(){const _0x313ab6=['1106492FqHkUS','getSingleLeftFromArrayStatic','frameBuffer_suzhou','frqDetect3_suzhou','716748Jkzhrf','prototype','frameBuffer_stadium','frameBuffer1D','setting','getTDOAInfoWithList','location1','detectSingleFrequencyWithList','filteredSignalList','1137110IGcbYC','latEnd','filter','signalMaxAndIndex','distances','13560DeEtiW','postMessage','updateSettings','lngStart','slice','latStart','frameBuffer2d','calculateDistanceThreeBeacon','calculateLocation','beaconCluster1D','苏州定位','frqDetect1','getTime','trunc','110PKRviN','chartData','distances2','inputDataList','frqDetect2','一秒内未检测到tdoa信号','data','calculateCoordinate','distances_nanchang','二维定位','642iolTxZ','locationSettingList_suzhou','beaconCluster1','getDistance','max','distances1','154yjsIgd','一秒内tdoa小于5个','abs','lngEnd','cal\x20costTime','min','coordinate','体育馆定位','54292eSZTJd','locType','frqDetect2_suzhou','6aAVBsB','beaconCluster2','beaconCluster2D','apply','index','log','7614jnARlp','suzhou','tdoaInfo','push','一维定位','getTimeDelta','length','frqDetect3','location','getSingleLeftFromList','frameBuffer1DThreeBeacon','tdoa','code','clear','floor','getTDOAInfo','forEach','frqDetect1_suzhou','4916PiFxIU','meanList','3877728SDlAKz','createBandPassFilter','lat','getSingleFromList','totalLength','onMessage','位置误差太大','updateSetting'];_0x8625=function(){return _0x313ab6;};return _0x8625();}let locations1=[[0x5,0x12,1.5],[0x0,0x12,1.5],[0x0,0x0,1.5],[0xa,0x0,1.5],[0xa,0x12,1.5]],locations2=[[0xf,0x12,1.5],[0x14,0x12,1.5],[0x14,0x0,1.5],[0xa,0x0,1.5],[0xa,0x12,1.5]],locations3=[[0x19,0x12,1.5],[0x14,0x12,1.5],[0x14,0x0,1.5],[0x1e,0x0,1.5],[0x1e,0x12,1.5]],locationSettingList=[getLocationSetting(locations1),getLocationSetting(locations2),getLocationSetting(locations3)],locationSettingList_suzhou=[],signalFilterParameterList=[[0xbb80,0x20,0x413c,0x4394],[0xbb80,0x20,0x490c,0x4b64],[0xbb80,0x20,0x50dc,0x5334]],signalFilterList=[];signalFilterParameterList[_0x155b20(0xe5)](_0x53bc9c=>{const _0x2ac78c=_0x155b20;let _0x550ecc=_0x2eafac[_0x2ac78c(0xea)](_0x53bc9c[0x0],_0x53bc9c[0x1],_0x53bc9c[0x2],_0x53bc9c[0x3]);signalFilterList[_0x2ac78c(0xd8)](_0x550ecc);});let qb2123filter=_0x2eafac[_0x155b20(0xea)](0xbb80,0x20,0x526c,0x5974),qb1719filter=_0x2eafac['createBandPassFilter'](0xbb80,0x20,0x4268,0x4844),qb1921filter=_0x2eafac[_0x155b20(0xea)](0xbb80,0x20,0x4a38,0x5208),chirpFilterParameterList=[[0xbb80,0x20,0x43f8,0x48a8],[0xbb80,0x20,0x4bc8,0x5078],[0xbb80,0x20,0x5398,0x5848]],chirpFilterList=[];chirpFilterParameterList[_0x155b20(0xe5)](_0x3bfae9=>{const _0x134e51=_0x155b20;let _0x284038=_0x2eafac[_0x134e51(0xea)](_0x3bfae9[0x0],_0x3bfae9[0x1],_0x3bfae9[0x2],_0x3bfae9[0x3]);chirpFilterList[_0x134e51(0xd8)](_0x284038);});function _0x1e40(_0x224563,_0xcb179f){const _0x8625f=_0x8625();return _0x1e40=function(_0x1e4018,_0x12508d){_0x1e4018=_0x1e4018-0xd2;let _0xeb2b03=_0x8625f[_0x1e4018];return _0xeb2b03;},_0x1e40(_0x224563,_0xcb179f);}let chirpFilterParameterList_suzhou=[[0xbb80,0x20,0x43f8,0x48a8],[0xbb80,0x20,0x4bc8,0x5078],[0xbb80,0x20,0x5398,0x5848]],chirpFilterList_suzhou=[];chirpFilterParameterList_suzhou[_0x155b20(0xe5)](_0x5f3841=>{const _0x520ce5=_0x155b20;let _0x58d42f=_0x2eafac['createBandPassFilter'](_0x5f3841[0x0],_0x5f3841[0x1],_0x5f3841[0x2],_0x5f3841[0x3]);chirpFilterList_suzhou[_0x520ce5(0xd8)](_0x58d42f);});let inputListTemp=[],needJudgeNumber=!![],chirpNum=-0x1,inputListStore=[],isTimeAligned=![],timeGap=0.33,timeOffset=-0x1;function oneDProcessThreeBeacon(_0x5d6f59){const _0xb5698b=_0x155b20;let _0x47968f=new Date()[_0xb5698b(0x10f)]();Array[_0xb5698b(0xf6)][_0xb5698b(0xd8)][_0xb5698b(0xd2)](SingleDetectList,_0x5d6f59);let _0x3d82db=[],_0x1c2d6f=[];if(SingleDetectList[_0xb5698b(0xdb)]>0x2000*0x4){let _0x3bcd73=new Array(SingleDetectList[_0xb5698b(0xdb)]);for(let _0xc8f0d0=0x0;_0xc8f0d0<SingleDetectList[_0xb5698b(0xdb)];_0xc8f0d0++){_0x3bcd73[_0xc8f0d0]=qb1921filter[_0xb5698b(0x100)](SingleDetectList[_0xc8f0d0]);}let _0x1daf46=beaconCluster1[_0xb5698b(0xfc)](_0x3bcd73),_0x347bb7=new Array(SingleDetectList['length']);for(let _0xd417bf=0x0;_0xd417bf<SingleDetectList[_0xb5698b(0xdb)];_0xd417bf++){_0x347bb7[_0xd417bf]=qb1719filter[_0xb5698b(0x100)](SingleDetectList[_0xd417bf]);}_0x3d82db=beaconCluster1[_0xb5698b(0xfa)](_0x347bb7);let _0x34019c=new Array(SingleDetectList[_0xb5698b(0xdb)]);for(let _0x57e117=0x0;_0x57e117<SingleDetectList['length'];_0x57e117++){_0x34019c[_0x57e117]=qb2123filter[_0xb5698b(0x100)](SingleDetectList[_0x57e117]);}_0x1c2d6f=beaconCluster2[_0xb5698b(0xfa)](_0x34019c),SingleDetectList=[];}worker[_0xb5698b(0x104)]({'code':_0xb5698b(0xd7),'tdoaInfo':_0x3d82db,'tdoaInfo2':_0x1c2d6f});let _0x37db80=_0x2eafac[_0xb5698b(0x10a)](_0x3d82db,_0x1c2d6f,settings1,settings2,0x1),_0x17c4d1=settings1['lngStart'],_0x1fe690=settings1[_0xb5698b(0x124)],_0x5d12fe=settings1[_0xb5698b(0x108)],_0xa398d4=settings1[_0xb5698b(0xff)],_0x4d496b=settings2[_0xb5698b(0x106)],_0x2d031e=settings2[_0xb5698b(0x124)],_0x286238=settings2['latStart'],_0x5d84cf=settings2[_0xb5698b(0xff)],_0x1089f9=[],_0x3aa6a7=[];_0x37db80[_0xb5698b(0x120)][_0xb5698b(0xe5)](_0x45ad4a=>{const _0xba5c66=_0xb5698b;_0x1089f9[_0xba5c66(0xd8)](_0x2eafac['calculateCoordinate'](_0x17c4d1,_0x1fe690,_0x5d12fe,_0xa398d4,_0x45ad4a/settings1[_0xba5c66(0xed)]));}),_0x37db80['distances2'][_0xb5698b(0xe5)](_0x367e60=>{const _0x3f9b89=_0xb5698b;_0x3aa6a7['push'](_0x2eafac[_0x3f9b89(0x118)](_0x4d496b,_0x2d031e,_0x286238,_0x5d84cf,_0x367e60/settings2[_0x3f9b89(0xed)]));}),worker[_0xb5698b(0x104)]({'code':'coordinate','coordinate1':_0x1089f9,'coordinate2':_0x3aa6a7,'timeStamp':_0x47968f}),worker['postMessage']({'code':_0xb5698b(0x119),'distances1':_0x37db80['distances1'],'distances2':_0x37db80[_0xb5698b(0x113)],'timeStamp':_0x47968f});}function oneDProcess(_0xcbee7e,_0xd33c25){const _0x34c98d=_0x155b20;let _0x4a8b7d=new Date()[_0x34c98d(0x10f)]();worker[_0x34c98d(0x104)]({'code':_0x34c98d(0xd7),'tdoaInfo':_0xcbee7e,'tdoaInfo2':_0xd33c25});let _0x208884=_0x2eafac[_0x34c98d(0x10a)](_0xcbee7e,_0xd33c25,settings1,settings2),_0x39108e=settings1['lngStart'],_0x178329=settings1[_0x34c98d(0x124)],_0x296034=settings1['latStart'],_0x14af04=settings1[_0x34c98d(0xff)],_0x4b6b85=settings2[_0x34c98d(0x106)],_0x1359ce=settings2[_0x34c98d(0x124)],_0x2d897d=settings2[_0x34c98d(0x108)],_0xe994ea=settings2['latEnd'],_0x516615=[],_0x8bbdf8=[];_0x208884[_0x34c98d(0x120)][_0x34c98d(0xe5)](_0x1031b3=>{const _0x1785f6=_0x34c98d;_0x516615[_0x1785f6(0xd8)](_0x2eafac[_0x1785f6(0x118)](_0x39108e,_0x178329,_0x296034,_0x14af04,_0x1031b3/settings1['totalLength']));}),_0x208884[_0x34c98d(0x113)][_0x34c98d(0xe5)](_0x4b5a91=>{const _0x26327b=_0x34c98d;_0x8bbdf8[_0x26327b(0xd8)](_0x2eafac[_0x26327b(0x118)](_0x4b6b85,_0x1359ce,_0x2d897d,_0xe994ea,_0x4b5a91/settings2['totalLength']));}),worker[_0x34c98d(0x104)]({'code':_0x34c98d(0x127),'coordinate1':_0x516615,'coordinate2':_0x8bbdf8,'timeStamp':_0x4a8b7d}),worker['postMessage']({'code':_0x34c98d(0x102),'distances1':_0x208884['distances1'],'distances2':_0x208884[_0x34c98d(0x113)],'timeStamp':_0x4a8b7d});}function twoDProcess(_0x34263a,_0x50bb20){const _0x55ee10=_0x155b20;let _0xb16f11=new Date()[_0x55ee10(0x10f)]();worker[_0x55ee10(0x104)]({'code':'tdoaInfo','tdoaInfo':_0x34263a});let _0x455021=[];_0x34263a['forEach'](_0x257f89=>{const _0x2e6a29=_0x55ee10;_0x257f89[_0x2e6a29(0xe0)]>0x0&&_0x455021[_0x2e6a29(0xd8)](_0x257f89[_0x2e6a29(0xe0)]);});let _0xd2fe7a=[[0x64,-0x1],[0x64,-0x1],[0x64,-0x1]];for(let _0x2e6496=0x0;_0x2e6496<_0x50bb20['length'];_0x2e6496++){let _0x53c86d=_0x50bb20[_0x2e6496];for(let _0x1d2a21=0x0;_0x1d2a21<0x3;_0x1d2a21++){_0xd2fe7a[_0x1d2a21][0x0]=Math[_0x55ee10(0x126)](_0xd2fe7a[_0x1d2a21][0x0],_0x53c86d[_0x1d2a21]),_0xd2fe7a[_0x1d2a21][0x1]=Math[_0x55ee10(0x11f)](_0xd2fe7a[_0x1d2a21][0x1],_0x53c86d[_0x1d2a21]);}}let _0x44746a={'period':1.002,'beaconsLocation':_0x50bb20,'locations':_0x50bb20,'xRange':_0xd2fe7a[0x0],'yRange':_0xd2fe7a[0x1],'zRange':_0xd2fe7a[0x2],'totalLength':Math[_0x55ee10(0x11f)](_0xd2fe7a[0x0][0x1]-_0xd2fe7a[0x0][0x0],_0xd2fe7a[0x1][0x1]-_0xd2fe7a[0x1][0x0],_0xd2fe7a[0x2][0x1]-_0xd2fe7a[0x2][0x0]),'lastCoordinate':null,'radius':0x3,'interval':0.15,'precision':0.05},_0x462a42=new Date()[_0x55ee10(0x10f)](),_0x5ef29a=_0x2eafac[_0x55ee10(0x10b)](_0x455021,_0x44746a);new Date()[_0x55ee10(0x10f)]()-_0x462a42>0x1&&console[_0x55ee10(0xd4)](_0x55ee10(0x125),new Date()[_0x55ee10(0x10f)]()-_0x462a42),worker[_0x55ee10(0x104)]({'code':_0x55ee10(0xdd),'location':_0x5ef29a});}function statidumProcess(_0x326c00){const _0x25fcb1=_0x155b20;inputListTemp[_0x25fcb1(0xd8)]['apply'](inputListTemp,_0x326c00);if(inputListTemp[_0x25fcb1(0xdb)]<sampleFrq)return;let _0x20ed46=sampleFrq-inputListStore[_0x25fcb1(0xdb)];console['log']('leftLength',_0x20ed46),inputListStore[_0x25fcb1(0xd8)][_0x25fcb1(0xd2)](inputListStore,inputListTemp[_0x25fcb1(0x107)](0x0,_0x20ed46)),inputListTemp=inputListTemp[_0x25fcb1(0x107)](_0x20ed46);let _0x4c5e0c=getJudgedNumber(inputListStore,signalFilterParameterList,0x1),_0x57a577=getJudgedNumber(inputListStore,chirpFilterParameterList,0x2);console[_0x25fcb1(0xd4)](_0x4c5e0c[_0x25fcb1(0x101)],_0x57a577[_0x25fcb1(0x101)]);let _0x5c727d=inputListStore[_0x25fcb1(0x107)](0x0);inputListStore=[];if(_0x4c5e0c['signalMaxAndIndex'][_0x25fcb1(0xd3)]==_0x57a577[_0x25fcb1(0x101)][_0x25fcb1(0xd3)])chirpNum=_0x4c5e0c['signalMaxAndIndex']['index'];else{if(_0x4c5e0c[_0x25fcb1(0x101)]['index']==0x0&&_0x57a577[_0x25fcb1(0x101)][_0x25fcb1(0xd3)]==0x2)chirpNum=0x2;else{let _0x3afced=[];for(let _0x5bc8de=0x0;_0x5bc8de<_0x4c5e0c['meanList']['length'];_0x5bc8de++){_0x3afced[_0x25fcb1(0xd8)](_0x4c5e0c[_0x25fcb1(0xe8)][_0x5bc8de]+_0x57a577['meanList'][_0x5bc8de]);}let _0x435953=getMaxAndIndex(_0x3afced);chirpNum=_0x435953[_0x25fcb1(0xd3)];}}console[_0x25fcb1(0xd4)](chirpNum);let _0x179b07=frqDetectList[chirpNum][_0x25fcb1(0xfa)](_0x57a577[_0x25fcb1(0xfd)][chirpNum]);_0x179b07=_0x179b07[_0x25fcb1(0x100)](_0x3e0af9=>_0x3e0af9['tdoa']>0x0),console[_0x25fcb1(0xd4)]('tdoaInfo',_0x179b07);if(_0x179b07['length']<0x5){console[_0x25fcb1(0xd4)]('一秒内tdoa小于5个');return;}if(!isTimeAligned){if(_0x179b07[_0x25fcb1(0xdb)]==0x0){console[_0x25fcb1(0xd4)](_0x25fcb1(0x116));return;}if(_0x179b07[_0x25fcb1(0xdb)]<0x5){console['log'](_0x179b07),console['log'](_0x25fcb1(0x122));return;}let _0x23f176=0x1;for(_0x23f176=0x1;_0x23f176<_0x179b07[_0x25fcb1(0xdb)];_0x23f176++){let _0x88516d=_0x179b07[_0x23f176][_0x25fcb1(0xe0)],_0x31863d=_0x179b07[_0x23f176-0x1][_0x25fcb1(0xe0)];if(_0x88516d-_0x31863d>timeGap){timeOffset=fract(_0x88516d),console[_0x25fcb1(0xd4)]('时间对齐',timeOffset),inputListStore['push']['apply'](inputListStore,_0x5c727d[_0x25fcb1(0x107)]((timeOffset-0.1)*sampleFrq)),frqDetectList[_0x25fcb1(0xe5)](_0x45687f=>{const _0x3a5b0a=_0x25fcb1;_0x45687f[_0x3a5b0a(0xe2)]();}),isTimeAligned=!![];break;}}_0x23f176==_0x179b07[_0x25fcb1(0xdb)]&&!isTimeAligned&&(isTimeAligned=!![]);isTimeAligned&&console['log']('时间已经对齐');return;}let _0x4124a1=[];_0x179b07[_0x25fcb1(0xe5)](_0x5c4a95=>{const _0x276975=_0x25fcb1;_0x5c4a95[_0x276975(0xe0)]>0x0&&_0x4124a1['push'](_0x5c4a95[_0x276975(0xe0)]);});let _0x2d27ee=_0x2eafac[_0x25fcb1(0x10b)](_0x4124a1,locationSettingList[chirpNum]);console[_0x25fcb1(0xd4)](_0x25fcb1(0xdd),_0x2d27ee),_0x2d27ee&&_0x2d27ee[0x3]<0xa&&worker[_0x25fcb1(0x104)]({'code':'location','location':_0x2d27ee});}function suzhouProcess(_0x143acf){const _0x45e180=_0x155b20;inputListTemp[_0x45e180(0xd8)]['apply'](inputListTemp,_0x143acf);if(inputListTemp[_0x45e180(0xdb)]<sampleFrq)return;let _0x958743=sampleFrq-inputListStore[_0x45e180(0xdb)];console[_0x45e180(0xd4)]('leftLength',_0x958743),inputListStore[_0x45e180(0xd8)]['apply'](inputListStore,inputListTemp[_0x45e180(0x107)](0x0,_0x958743)),inputListTemp=inputListTemp['slice'](_0x958743);let _0x52c5b3=filterSignal_suzhou(inputListStore,chirpFilterParameterList),_0x4a976c=inputListStore['slice'](0x0);inputListStore=[];let _0x42f694=[];frqDetectList_suzhou[_0x45e180(0xe5)]((_0x1c4002,_0x391d95)=>{const _0x277168=_0x45e180;let _0xf9e189=_0x1c4002[_0x277168(0xfa)](_0x52c5b3[_0x277168(0xfd)][_0x391d95]);_0xf9e189=_0xf9e189['filter'](_0x1824a7=>_0x1824a7[_0x277168(0xe0)]>0x0),_0x42f694['push'](_0xf9e189);});let _0x15569c=[];_0x42f694[_0x45e180(0xe5)]((_0x115bb8,_0x19592e)=>{const _0x1d591e=_0x45e180;if(_0x19592e==0x0||_0x19592e==0x1){let _0x32d339=[];_0x115bb8['forEach'](_0x248db1=>{const _0x2e9fd1=_0x1e40;_0x248db1[_0x2e9fd1(0xe0)]>0x0&&_0x32d339[_0x2e9fd1(0xd8)](_0x248db1[_0x2e9fd1(0xe0)]);}),console[_0x1d591e(0xd4)](_0x19592e,_0x19592e,_0x32d339);let _0x176c89=_0x32d339['map'];for(let _0x5caceb=0x0;_0x5caceb<_0x32d339[_0x1d591e(0xdb)];_0x5caceb++){let _0x2b3087=_0x2eafac[_0x1d591e(0x10b)]([_0x32d339[_0x5caceb]],locationSettingList_suzhou[_0x19592e],_0x19592e);console[_0x1d591e(0xd4)](_0x19592e,_0x19592e,_0x1d591e(0xdd),_0x2b3087);if(_0x2b3087&&_0x2b3087[0x3]<0xa)_0x15569c[_0x1d591e(0xdb)]>0x0?_0x2b3087[0x3]<_0x15569c[0x0][0x3]&&(_0x15569c[0x0]=_0x2b3087):_0x15569c[_0x1d591e(0xd8)](_0x2b3087);else _0x2b3087&&console['log'](_0x1d591e(0xef),_0x2b3087);}}else{if(_0x19592e==0x2){let _0x5f0b2a=frqDetectList_suzhou[_0x19592e],_0x480f54=_0x115bb8;console[_0x1d591e(0xd4)]('p22',_0x480f54);let _0x451e5c=_0x5f0b2a[_0x1d591e(0x11e)](_0x5f0b2a[_0x1d591e(0xda)](_0x480f54));if(_0x451e5c&&_0x451e5c[_0x1d591e(0xdb)]>0x0){let _0x445ee8=frequenceSettingList_suzhou[0x2],_0xaedcd8=_0x2eafac[_0x1d591e(0x118)](_0x445ee8[_0x1d591e(0x106)],_0x445ee8[_0x1d591e(0x124)],_0x445ee8['latStart'],_0x445ee8[_0x1d591e(0xff)],_0x451e5c[0x0]/_0x445ee8[_0x1d591e(0xed)]);_0x15569c['push']([_0xaedcd8['lng'],_0xaedcd8[_0x1d591e(0xeb)]]);}}}}),worker['postMessage']({'code':_0x45e180(0xdd),'location':_0x15569c,'type':_0x45e180(0xd6)});}worker[_0x155b20(0xee)](_0x2317b5=>{const _0x15634d=_0x155b20;switch(_0x2317b5[_0x15634d(0xe1)]){case _0x15634d(0xdf):{let _0x5dc07b=_0x2317b5['data'],_0x2bc0be=_0x2eafac[_0x15634d(0xf2)](_0x5dc07b);oneDProcessThreeBeacon(_0x2bc0be);break;}case _0x15634d(0xf8):{let _0x26c1ae=_0x2317b5[_0x15634d(0x117)],_0x416dd6=beaconCluster1D[_0x15634d(0xe4)](_0x26c1ae),_0x1c93fb=beaconCluster1D[_0x15634d(0x11e)](_0x416dd6);console[_0x15634d(0xd4)](_0x15634d(0xdd),_0x1c93fb),worker[_0x15634d(0x104)]({'code':'location','location':_0x1c93fb});break;}case _0x15634d(0x109):{let _0x51be2c=_0x2317b5[_0x15634d(0x117)],_0x2b2e43=_0x2317b5['chartData'][_0x15634d(0x117)],_0x30b21f=beaconCluster2D[_0x15634d(0xe4)](_0x51be2c),_0x2c2321=[],_0x501751=0x2;for(let _0x49873b=0x0;_0x49873b<_0x2b2e43[_0x15634d(0xdb)];_0x49873b++){_0x2c2321[_0x15634d(0xd8)]([..._0x2b2e43[_0x49873b],_0x501751]);}twoDProcess(_0x30b21f,_0x2c2321);break;}case _0x15634d(0xf7):{let _0x15d2e1=_0x2317b5['data'],_0x53d86=_0x2eafac[_0x15634d(0xf2)](_0x15d2e1);statidumProcess(_0x53d86);break;}case _0x15634d(0xf3):{let _0x2b9ed3=_0x2317b5[_0x15634d(0x117)],_0x5a51bc=_0x2eafac['getSingleLeftFromArrayStatic'](_0x2b9ed3);suzhouProcess(_0x5a51bc);break;}case _0x15634d(0x114):{let _0xe3b1a7=_0x2eafac[_0x15634d(0xde)](_0x2317b5[_0x15634d(0x117)]),_0xaf2c7d=_0x2317b5[_0x15634d(0x12a)];if(_0xaf2c7d=='一维定位三基站')oneDProcessThreeBeacon(_0xe3b1a7);else{if(_0xaf2c7d==_0x15634d(0xd9)){let _0x375850=beaconCluster1[_0x15634d(0xfa)](_0xe3b1a7),_0x50e6d0=beaconCluster2['getTDOAInfoWithList'](_0xe3b1a7);oneDProcess(_0x375850,_0x50e6d0);}else{if(_0xaf2c7d==_0x15634d(0x11a)){let _0x580262=_0x2317b5[_0x15634d(0x112)]['data'],_0x450f7a=beaconCluster2D[_0x15634d(0xfa)](_0xe3b1a7),_0x3d3969=[],_0x6ba23b=0x2;for(let _0x5b6b75=0x0;_0x5b6b75<_0x580262['length'];_0x5b6b75++){_0x3d3969['push']([..._0x580262[_0x5b6b75],_0x6ba23b]);}twoDProcess(_0x450f7a,_0x3d3969);}else{if(_0xaf2c7d==_0x15634d(0x128)){statidumProcess(_0xe3b1a7);break;}else{if(_0xaf2c7d=='苏州定位'){let _0x3f0e57=_0x2eafac[_0x15634d(0xec)](_0x2317b5[_0x15634d(0x117)]);suzhouProcess(_0x3f0e57);break;}}}}}break;}case _0x15634d(0xf0):let _0x32a079=_0x2317b5[_0x15634d(0x12a)];console[_0x15634d(0xd4)](_0x2317b5);if(_0x32a079=='一维定位三基站')beaconCluster1[_0x15634d(0x105)](_0x2317b5[_0x15634d(0x11d)]),beaconCluster2[_0x15634d(0x105)](_0x2317b5['beaconCluster2']),settings1=_0x2317b5[_0x15634d(0x11d)],settings2=_0x2317b5[_0x15634d(0x12d)];else{if(_0x32a079=='一维定位')beaconCluster1D[_0x15634d(0x105)](_0x2317b5[_0x15634d(0x10c)]),settings1D=_0x2317b5['beaconCluster1D'];else{if(_0x32a079==_0x15634d(0x11a))beaconCluster2D[_0x15634d(0x105)](_0x2317b5[_0x15634d(0x12e)]),settings2D=_0x2317b5['beaconCluster2D'];else{if(_0x32a079==_0x15634d(0x10d)){console[_0x15634d(0xd4)](_0x15634d(0x10d),_0x2317b5[_0x15634d(0xf9)]);let _0x4a1376=_0x2317b5[_0x15634d(0xf9)]['coordinate'];locationSettingList_suzhou=[];let _0x4947c4=[];for(let _0x59b0e9=0x0;_0x59b0e9<0x4;_0x59b0e9++){_0x4a1376[_0x59b0e9][_0x15634d(0xdb)]<=0x2&&_0x4a1376[_0x59b0e9]['push'](1.5);let _0x3b7a7f=_0x4a1376[_0x59b0e9]['slice'](0x0);_0x4947c4[_0x15634d(0xd8)](_0x3b7a7f);}console['log'](_0x15634d(0xfb),_0x4947c4),locationSettingList_suzhou[_0x15634d(0xd8)](getLocationSetting(_0x4947c4));let _0x2eaa98=[];for(let _0x2e47bb=0x4;_0x2e47bb<0x8;_0x2e47bb++){_0x4a1376[_0x2e47bb]['length']<=0x2&&_0x4a1376[_0x2e47bb][_0x15634d(0xd8)](1.5);let _0x3a0a5d=_0x4a1376[_0x2e47bb][_0x15634d(0x107)](0x0);_0x2eaa98[_0x15634d(0xd8)](_0x3a0a5d);}locationSettingList_suzhou[_0x15634d(0xd8)](getLocationSetting(_0x2eaa98)),console['log'](_0x15634d(0x11c),locationSettingList_suzhou),frequenceSetting3_suzhou[_0x15634d(0xed)]=Math[_0x15634d(0x123)](_0x4a1376[0x8][0x0]-_0x4a1376[0x9][0x0]),frequenceSetting3_suzhou[_0x15634d(0x106)]=_0x4a1376[0x8][0x0],frequenceSetting3_suzhou[_0x15634d(0x124)]=_0x4a1376[0x9][0x0],frequenceSetting3_suzhou[_0x15634d(0x108)]=_0x4a1376[0x8][0x1],frequenceSetting3_suzhou[_0x15634d(0xff)]=_0x4a1376[0x9][0x1],frqDetectList_suzhou[0x2][_0x15634d(0x105)](frequenceSetting3_suzhou);}}}}break;default:break;}});function getMaxAndIndex(_0x45892e){const _0x459175=_0x155b20;if(!_0x45892e||_0x45892e['length']==0x0)return{'index':-0x1,'max':-0x1};let _0x1b36cf=0x0,_0x36a961=_0x45892e[0x0];for(let _0x4d21d8=0x0;_0x4d21d8<_0x45892e[_0x459175(0xdb)];_0x4d21d8++){_0x45892e[_0x4d21d8]>_0x36a961&&(_0x36a961=_0x45892e[_0x4d21d8],_0x1b36cf=_0x4d21d8);}return{'index':_0x1b36cf,'max':_0x36a961};}function getAbsMean(_0x37d107){const _0x50a04e=_0x155b20;let _0x3711d6=0x0;for(let _0x5f179f=0x0;_0x5f179f<_0x37d107[_0x50a04e(0xdb)];_0x5f179f++){_0x3711d6+=Math[_0x50a04e(0x123)](_0x37d107[_0x5f179f]);}let _0xa19833=_0x3711d6/_0x37d107[_0x50a04e(0xdb)];return _0xa19833;}function getJudgedNumber(_0x2fb123,_0x33028c,_0x3a094e=0x1){const _0x53b5b7=_0x155b20;let _0x1dbd92={},_0x262e59=[];if(_0x3a094e==0x1)signalFilterList['forEach'](_0x375994=>{const _0x1727bb=_0x1e40;let _0x34b131=new Array(_0x2fb123[_0x1727bb(0xdb)]);for(let _0x555dde=0x0;_0x555dde<_0x2fb123[_0x1727bb(0xdb)];_0x555dde++){_0x34b131[_0x555dde]=_0x375994[_0x1727bb(0x100)](_0x2fb123[_0x555dde]);}_0x262e59[_0x1727bb(0xd8)](_0x34b131);});else _0x3a094e==0x2&&chirpFilterList[_0x53b5b7(0xe5)](_0x5d43da=>{const _0x303b63=_0x53b5b7;let _0x4608a4=new Array(_0x2fb123[_0x303b63(0xdb)]);for(let _0x31f2e5=0x0;_0x31f2e5<_0x2fb123[_0x303b63(0xdb)];_0x31f2e5++){_0x4608a4[_0x31f2e5]=_0x5d43da[_0x303b63(0x100)](_0x2fb123[_0x31f2e5]);}_0x262e59[_0x303b63(0xd8)](_0x4608a4);});let _0x4f1b18=[];for(let _0x14d9d4=0x0;_0x14d9d4<_0x262e59[_0x53b5b7(0xdb)];_0x14d9d4++){_0x4f1b18['push'](getAbsMean(_0x262e59[_0x14d9d4]));}let _0x36f8d8=getMaxAndIndex(_0x4f1b18);return _0x1dbd92[_0x53b5b7(0x101)]=_0x36f8d8,_0x1dbd92[_0x53b5b7(0xe8)]=_0x4f1b18,_0x1dbd92['filteredSignalList']=_0x262e59,_0x1dbd92;}function filterSignal_suzhou(_0x57de0c,_0x3c7461){const _0x51632a=_0x155b20;let _0x39e511={},_0x60671b=[];return chirpFilterList_suzhou[_0x51632a(0xe5)](_0xcbde25=>{const _0x1eccc0=_0x51632a;let _0x5e7ffe=new Array(_0x57de0c[_0x1eccc0(0xdb)]);for(let _0x3bb0ac=0x0;_0x3bb0ac<_0x57de0c[_0x1eccc0(0xdb)];_0x3bb0ac++){_0x5e7ffe[_0x3bb0ac]=_0x57de0c[_0x3bb0ac];}_0x60671b[_0x1eccc0(0xd8)](_0x5e7ffe);}),_0x39e511[_0x51632a(0xfd)]=_0x60671b,_0x39e511;}function fract(_0x5e8abd){const _0x294e01=_0x155b20;return _0x5e8abd-Math[_0x294e01(0x110)](_0x5e8abd);}function getLocationSetting(_0x1485a9){const _0xad972f=_0x155b20;let _0x246558=[[0x64,-0x1],[0x64,-0x1],[0x64,-0x1]];for(let _0x25ecad=0x0;_0x25ecad<_0x1485a9[_0xad972f(0xdb)];_0x25ecad++){let _0x554950=_0x1485a9[_0x25ecad];for(let _0x3d179e=0x0;_0x3d179e<0x3;_0x3d179e++){_0x246558[_0x3d179e][0x0]=Math['min'](_0x246558[_0x3d179e][0x0],_0x554950[_0x3d179e]),_0x246558[_0x3d179e][0x1]=Math[_0xad972f(0x11f)](_0x246558[_0x3d179e][0x1],_0x554950[_0x3d179e]);}}let _0xc6df42={'period':1.002,'beaconsLocation':_0x1485a9,'locations':_0x1485a9,'xRange':_0x246558[0x0],'yRange':_0x246558[0x1],'zRange':_0x246558[0x2],'totalLength':Math['max'](_0x246558[0x0][0x1]-_0x246558[0x0][0x0],_0x246558[0x1][0x1]-_0x246558[0x1][0x0],_0x246558[0x2][0x1]-_0x246558[0x2][0x0]),'lastCoordinate':null,'radius':0x3,'interval':0.15,'precision':0.1};return _0xc6df42;}